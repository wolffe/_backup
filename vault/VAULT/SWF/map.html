<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Dublin Map (Highlights)</title>
<script>
// stores the device context of the canvas we use to draw the outlines
// initialized in myInit, used in myHover and myLeave
var hdc;

// shorthand func
function byId(e){return document.getElementById(e);}

// takes a string that contains coords eg - "227,307,261,309, 339,354, 328,371, 240,331"
// draws a line from each co-ord pair to the next - assumes starting point needs to be repeated as ending point.
function drawPoly(coOrdStr) {
    var mCoords = coOrdStr.split(',');
    var i, n;
    n = mCoords.length;

    hdc.beginPath();
    hdc.moveTo(mCoords[0], mCoords[1]);
    for (i=2; i<n; i+=2) {
        hdc.lineTo(mCoords[i], mCoords[i+1]);
    }
    hdc.lineTo(mCoords[0], mCoords[1]);
    hdc.stroke();
}

function drawRect(coOrdStr) {
    var mCoords = coOrdStr.split(',');
    var top, left, bot, right;
    left = mCoords[0];
    top = mCoords[1];
    right = mCoords[2];
    bot = mCoords[3];
    hdc.strokeRect(left,top,right-left,bot-top); 
}

function myHover(element) {
    var hoveredElement = element;
    var coordStr = element.getAttribute('coords');
    var areaType = element.getAttribute('shape');

    switch (areaType) {
        case 'polygon':
        case 'poly':
            drawPoly(coordStr);
            break;

        case 'rect':
            drawRect(coordStr);
    }
}

function myLeave() {
    var canvas = byId('myCanvas');
    hdc.clearRect(0, 0, canvas.width, canvas.height);
}

function myInit() {
	// get the target image
	var img = byId('mapMe');

	var x, y, w, h;

    // get it's position and width+height
    x = img.offsetLeft;
    y = img.offsetTop;
    w = img.clientWidth;
    h = img.clientHeight;

    // move the canvas, so it's contained by the same parent as the image
    var imgParent = img.parentNode;
    var can = byId('myCanvas');
    imgParent.appendChild(can);

    // place the canvas in front of the image
    can.style.zIndex = 1;

    // position it over the image
    can.style.left = x+'px';
    can.style.top = y+'px';

    // make same size as the image
    can.setAttribute('width', w+'px');
    can.setAttribute('height', h+'px');

    // get it's context
    hdc = can.getContext('2d');

	// set the 'default' values for the colour/width of fill/stroke operations
	hdc.fillStyle = 'white';
	hdc.strokeStyle = 'black'; // change colour of stroke to 'white'
	hdc.lineWidth = 5;

	// Set the shadow properties that control the appearance of the shadow
  	hdc.shadowColor   = '#000000';
  	hdc.shadowOffsetX = 0;
   	hdc.shadowOffsetY = 0;
  	hdc.shadowBlur    = 10;
}
</script>

<style>
canvas {
	pointer-events: none; /* make the canvas transparent to the mouse - needed since canvas is position infront of image */
	position: absolute;
}
</style>
</head>

<body onload="myInit()">
	<canvas id="myCanvas"></canvas>
	<img src="dublin-map.jpg" usemap="#mapMeMap" id="mapMe">
	<map name="mapMeMap">
		<area onmouseover="myHover(this);" onmouseout="myLeave();" shape="poly" coords="10,203,36,186,52,182,100,173,100,155,80,154,80,147,63,114,87,87,105,68,116,64,122,83,134,101,140,108,148,122,157,134,178,137,196,136,215,131,216,153,195,156,189,184,183,183,182,190,186,206,179,207,173,207,174,218,158,219,157,224,129,239,127,254,131,259,114,274,104,294,90,282,58,270,54,249,39,226,30,226,10,227,10,203" href="http://www.google.ie/" alt="area_1">
		<area onmouseover="myHover(this);" onmouseout="myLeave();" shape="poly" coords="255,193,254,207,250,219,247,234,247,248,250,265,251,287,253,303,234,304,228,251,199,240,193,243,178,244,178,230,173,218,173,206,185,205,183,193,183,184,195,186,213,186,225,186,225,190,223,196,223,201,239,193,255,193" href="http://www.google.ie/" alt="area_2">
		<area onmouseover="myHover(this);" onmouseout="myLeave();" shape="poly" coords="216,153,242,147,246,165,260,163,265,176,285,169,284,188,276,191,255,193,239,194,225,201,222,197,224,190,224,186,212,186,212,179,207,166,216,164,216,153" href="http://www.google.ie/" alt="area_3">
		<area onmouseover="myHover(this);" onmouseout="myLeave();" shape="poly" coords="204,89,232,107,257,61,267,48,291,4,378,24,390,27,400,33,388,51,355,88,303,106,316,139,310,143,282,150,244,159,239,134,228,139,222,126,214,132,196,136,204,110,204,89" href="http://www.google.ie/" alt="area_4">
		<area onmouseover="myHover(this);" onmouseout="myLeave();" shape="poly" coords="356,89,385,127,363,126,359,155,347,154,347,168,375,172,370,201,402,208,406,191,443,195,448,182,438,181,441,162,441,149,441,134,467,137,466,189,444,218,432,254,425,258,397,241,365,221,338,215,335,221,323,214,285,201,285,168,287,167,281,150,308,143,317,139,323,133,313,102,356,89" href="http://www.google.ie/" alt="area_5">
		<area onmouseover="myHover(this);" onmouseout="myLeave();" shape="poly" coords="254,192,268,191,283,188,285,200,313,210,334,220,391,254,401,243,427,258,437,270,442,283,443,291,423,303,422,307,396,305,384,302,378,300,376,307,265,307,256,302,252,291,249,264,246,249,249,225,255,203,254,192" href="http://www.google.ie/" alt="area_6">
	</map>
</body>
</html>
